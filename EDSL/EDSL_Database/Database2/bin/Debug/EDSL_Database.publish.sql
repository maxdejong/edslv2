/*
Deployment script for EDSL_db

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "EDSL_db"
:setvar DefaultFilePrefix "EDSL_db"
:setvar DefaultDataPath ""
:setvar DefaultLogPath ""

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
IF EXISTS (SELECT 1
           FROM   [sys].[databases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ANSI_NULLS ON,
                ANSI_PADDING ON,
                ANSI_WARNINGS ON,
                ARITHABORT ON,
                CONCAT_NULL_YIELDS_NULL ON,
                QUOTED_IDENTIFIER ON,
                ANSI_NULL_DEFAULT ON 
            WITH ROLLBACK IMMEDIATE;
    END


GO
IF EXISTS (SELECT 1
           FROM   [sys].[databases]
           WHERE  [name] = N'$(DatabaseName)')
    BEGIN
        ALTER DATABASE [$(DatabaseName)]
            SET ALLOW_SNAPSHOT_ISOLATION OFF;
    END


GO
PRINT N'Rename refactoring operation with key cf6b3d2c-c135-4bfa-b953-bd4eec968545 is skipped, element [dbo].[Leauge].[Id] (SqlSimpleColumn) will not be renamed to leagueID';


GO
PRINT N'Rename refactoring operation with key 2c8fee8e-56e4-4b27-b4fa-e5d4222408d6 is skipped, element [dbo].[Season].[Id] (SqlSimpleColumn) will not be renamed to seasID';


GO
PRINT N'Rename refactoring operation with key 2700da84-eb64-4d0c-9162-c7884b93c0c3 is skipped, element [dbo].[Division].[Id] (SqlSimpleColumn) will not be renamed to divID';


GO
PRINT N'Rename refactoring operation with key d293ff49-9ca9-41d2-8eed-de3c0c68c5d9 is skipped, element [dbo].[Club].[Id] (SqlSimpleColumn) will not be renamed to clubID';


GO
PRINT N'Rename refactoring operation with key f4d38e5e-2423-439b-bdd6-dd9429e72dbf is skipped, element [dbo].[breakDate].[Id] (SqlSimpleColumn) will not be renamed to breakID';


GO
PRINT N'Rename refactoring operation with key 84d7f630-1802-4ce2-a75d-af62286568a8 is skipped, element [dbo].[Draw].[Id] (SqlSimpleColumn) will not be renamed to drawID';


GO
PRINT N'Rename refactoring operation with key 47c246ae-b173-4edc-98c5-6cc024c27c8f is skipped, element [dbo].[Location].[Id] (SqlSimpleColumn) will not be renamed to groupID';


GO
PRINT N'Rename refactoring operation with key cb5e00a8-ed9b-40ab-8043-daf9bf6c467a is skipped, element [dbo].[Team].[Id] (SqlSimpleColumn) will not be renamed to teamID';


GO
PRINT N'Rename refactoring operation with key f1a7f0b9-8f21-48a1-9496-df86fc9d3dea is skipped, element [dbo].[Round].[Id] (SqlSimpleColumn) will not be renamed to roundID';


GO
PRINT N'Rename refactoring operation with key 2d2d8304-726b-4b2c-b386-5816827e3a04, f21f8d84-a2b5-4367-9f1a-054e350c930c is skipped, element [dbo].[Player].[Id] (SqlSimpleColumn) will not be renamed to playerID';


GO
PRINT N'Rename refactoring operation with key 1221e429-fc7a-415f-ae12-2e259fe90893 is skipped, element [dbo].[Match].[Id] (SqlSimpleColumn) will not be renamed to matchID';


GO
PRINT N'Rename refactoring operation with key 7727cd41-d6b9-4328-b89d-109e8a4eae90 is skipped, element [dbo].[Contact].[Id] (SqlSimpleColumn) will not be renamed to contactID';


GO
PRINT N'Creating [dbo].[breakDate]...';


GO
CREATE TABLE [dbo].[breakDate] (
    [breakID]   NVARCHAR (50) NOT NULL,
    [seasonPID] NVARCHAR (50) NOT NULL,
    [breakDate] DATE          NULL,
    PRIMARY KEY CLUSTERED ([breakID] ASC)
);


GO
PRINT N'Creating [dbo].[Club]...';


GO
CREATE TABLE [dbo].[Club] (
    [clubID]          NVARCHAR (50) NOT NULL,
    [clubName]        NVARCHAR (50) NULL,
    [firstRegistered] NVARCHAR (50) NULL,
    [pContact]        NVARCHAR (50) NOT NULL,
    [sContact]        NVARCHAR (50) NULL,
    [location]        NVARCHAR (50) NOT NULL,
    PRIMARY KEY CLUSTERED ([clubID] ASC)
);


GO
PRINT N'Creating [dbo].[Contact]...';


GO
CREATE TABLE [dbo].[Contact] (
    [contactID] NVARCHAR (50) NOT NULL,
    [fName]     NVARCHAR (50) NOT NULL,
    [lName]     NVARCHAR (50) NOT NULL,
    [gender]    NVARCHAR (50) NOT NULL,
    [address1]  NVARCHAR (50) NOT NULL,
    [address2]  NVARCHAR (50) NULL,
    [postcode]  INT           NULL,
    [phone]     NVARCHAR (50) NOT NULL,
    [email]     NVARCHAR (50) NULL,
    PRIMARY KEY CLUSTERED ([contactID] ASC)
);


GO
PRINT N'Creating [dbo].[Division]...';


GO
CREATE TABLE [dbo].[Division] (
    [divID]     NVARCHAR (50) NOT NULL,
    [leaguePID] NVARCHAR (50) NOT NULL,
    [divCode]   NVARCHAR (50) NULL,
    [ageLimit]  INT           NULL,
    PRIMARY KEY CLUSTERED ([divID] ASC)
);


GO
PRINT N'Creating [dbo].[Draw]...';


GO
CREATE TABLE [dbo].[Draw] (
    [drawID]      NVARCHAR (50) NOT NULL,
    [seasonPID]   NVARCHAR (50) NOT NULL,
    [divisionPID] NVARCHAR (50) NOT NULL,
    PRIMARY KEY CLUSTERED ([drawID] ASC)
);


GO
PRINT N'Creating [dbo].[Leauge]...';


GO
CREATE TABLE [dbo].[Leauge] (
    [leagueID]   NVARCHAR (50) NOT NULL,
    [leagueName] NVARCHAR (50) NULL,
    PRIMARY KEY CLUSTERED ([leagueID] ASC)
);


GO
PRINT N'Creating [dbo].[Location]...';


GO
CREATE TABLE [dbo].[Location] (
    [groundID]     NVARCHAR (50) NOT NULL,
    [groundName]   NVARCHAR (50) NOT NULL,
    [addressLine1] NVARCHAR (50) NOT NULL,
    [addressLine2] NVARCHAR (50) NULL,
    [postCode]     INT           NOT NULL,
    [suburb]       NVARCHAR (50) NOT NULL,
    [state]        NVARCHAR (50) NOT NULL,
    [homeClub]     NVARCHAR (50) NULL,
    PRIMARY KEY CLUSTERED ([groundID] ASC)
);


GO
PRINT N'Creating [dbo].[Match]...';


GO
CREATE TABLE [dbo].[Match] (
    [matchID]  NVARCHAR (50) NOT NULL,
    [roundPID] NVARCHAR (50) NOT NULL,
    [homeTeam] NVARCHAR (50) NULL,
    [awayTeam] NVARCHAR (50) NULL,
    [homeGoal] INT           NULL,
    [awayGoal] INT           NULL,
    PRIMARY KEY CLUSTERED ([matchID] ASC)
);


GO
PRINT N'Creating [dbo].[Player]...';


GO
CREATE TABLE [dbo].[Player] (
    [playerID]        NVARCHAR (50) NOT NULL,
    [teamPID]         NVARCHAR (50) NOT NULL,
    [pContact]        NVARCHAR (50) NOT NULL,
    [eContact]        NVARCHAR (50) NULL,
    [firstRegistered] INT           NULL,
    PRIMARY KEY CLUSTERED ([playerID] ASC)
);


GO
PRINT N'Creating [dbo].[Round]...';


GO
CREATE TABLE [dbo].[Round] (
    [roundID] NVARCHAR (50) NOT NULL,
    [drawPID] NVARCHAR (50) NOT NULL,
    [date]    DATE          NULL,
    PRIMARY KEY CLUSTERED ([roundID] ASC)
);


GO
PRINT N'Creating [dbo].[Season]...';


GO
CREATE TABLE [dbo].[Season] (
    [seasonID]   NVARCHAR (50) NOT NULL,
    [leaguePID]  NVARCHAR (50) NOT NULL,
    [seasonYear] INT           NOT NULL,
    [startDate]  DATE          NOT NULL,
    PRIMARY KEY CLUSTERED ([seasonID] ASC)
);


GO
PRINT N'Creating [dbo].[Team]...';


GO
CREATE TABLE [dbo].[Team] (
    [teamID]   NVARCHAR (50) NOT NULL,
    [clubPID]  NVARCHAR (50) NOT NULL,
    [teamName] NVARCHAR (50) NOT NULL,
    [contact]  INT           NOT NULL,
    PRIMARY KEY CLUSTERED ([teamID] ASC)
);


GO
PRINT N'Update complete.';


GO
